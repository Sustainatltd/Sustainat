# ------------------------------------------
# ğŸ“¦ Kubernetes Deployment for MongoDB
# ------------------------------------------
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sustainat-mongo           # ğŸ“› Name of this deployment
  namespace: sustainat            # ğŸ“¦ This belongs to the "sustainat" namespace
spec:
  replicas: 1                     # ğŸ‘¶ One MongoDB pod is enough for now
  selector:
    matchLabels:
      app: sustainat-mongo        # ğŸ¯ This label must match pod label below

  template:
    metadata:
      labels:
        app: sustainat-mongo      # âœ… Pod will be labeled with this
    spec:
      containers:
        - name: mongo                        # ğŸ³ Name of the container inside the pod
          image: mongo:latest                # ğŸ“¥ Pull the official MongoDB image from Docker Hub
          ports:
            - containerPort: 27017           # ğŸ”Œ MongoDB listens on this port (default)
          # (optional for now) You can add volumes later to store data even after pod restarts

---
# ------------------------------------------
# ğŸŒ Kubernetes Service for MongoDB
# ------------------------------------------
apiVersion: v1
kind: Service
metadata:
  name: sustainat-mongo           # ğŸ“› Name of the service (same name used in backend env)
  namespace: sustainat            # ğŸ“¦ Same namespace as the deployment
spec:
  selector:
    app: sustainat-mongo          # ğŸ”— Connects to pods with this label
  ports:
    - port: 27017                 # ğŸ“¡ Cluster port (used by backend to connect)
      targetPort: 27017           # ğŸšª Matches the container's port
