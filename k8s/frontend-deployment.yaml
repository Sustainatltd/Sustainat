# -----------------------------------------------
# ğŸ“¦ Kubernetes Deployment for React Frontend
# -----------------------------------------------
apiVersion: apps/v1                 # ğŸ§  Tells Kubernetes this is a Deployment
kind: Deployment
metadata:
  name: sustainat-frontend          # ğŸ“› Name of the deployment
  namespace: sustainat              # ğŸ“¦ It goes inside the "sustainat" namespace
  labels:
    app: sustainat-frontend         # ğŸ·ï¸ This label helps connect with the service

spec:
  replicas: 1                       # ğŸ‘¶ Start with 1 copy of the frontend (1 pod)
  selector:
    matchLabels:
      app: sustainat-frontend       # ğŸ¯ Must match the pod label below

  template:                         # ğŸ“¦ This template defines how the pod will look
    metadata:
      labels:
        app: sustainat-frontend     # âœ… The pod gets this label
    spec:
      containers:
        - name: sustainat-frontend                    # ğŸ³ Name of the container
          image: sustainatltd/sustainat-project-client:latest  # ğŸ“¥ Pull from Docker Hub
          imagePullPolicy: Always                     # ğŸ” Always fetch the latest image
          ports:
            - containerPort: 80                       # ğŸšª React (nginx) runs on port 80 inside container

---
# -----------------------------------------------
# ğŸŒ Kubernetes Service for React Frontend (NodePort)
# -----------------------------------------------
apiVersion: v1
kind: Service
metadata:
  name: sustainat-frontend-service   # ğŸ“› Name of the service
  namespace: sustainat               # ğŸ“¦ Same namespace as the frontend deployment

spec:
  type: NodePort                     # ğŸŒ Makes it accessible via Minikube
  selector:
    app: sustainat-frontend          # ğŸ”— Targets pods with this label
  ports:
    - port: 80                       # ğŸ” Port inside the cluster
      targetPort: 80                 # ğŸ“¥ Port where container serves React app
      nodePort: 30008                # ğŸ–¥ï¸ Access from browser: http://localhost:30008/
